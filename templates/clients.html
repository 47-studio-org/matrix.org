{% extends "skel.html" %}
{% block html_title %}Matrix.org - {{ page.title }}{% endblock html_title %}
{% block content %}
{% set clients = load_data(path="content/clients/clients.toml") %}
<main id="clients">
    <article class="content">
        <header>
            <h1>{{ page.title }}</h1>
        </header>
        <main>
            <p>{{ page.content | safe }}</p>
            <!-- Showcase -->
            <div class="grid">
                {% for name, client in clients %}
                {% if client.featured %}
                <div class="grid-container-third">
                    <div class="block">
                        {% set preview_url = get_url(path="clients/" ~ client.preview, trailing_slash=false ) %}
                        <img src="{{ preview_url }}" alt="{{ name }} Preview">
                        <h3>{{ name }}</h3>
                        <p>{{ client.summary | safe }}</p>
                        <div>
                            {% for platform in client.platforms %}
                            <!-- TODO logos -->
                            <a href="{{ platform.url }}">{{ platform.name }}</a>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </main>
    </article>
    <article class="content">
        <header>
            <h1>
                All known clients
            </h1>
        </header>
        <main>
            <!-- Table -->
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Maintainer</th>
                        <th>Platforms</th>
                        <th>Last Release</th>
                        <th>Maturity</th>
                        <th>License</th>
                    </tr>
                </thead>
                <tbody>
                    {% for name, client in clients %}
                    <tr>
                        <td>
                            {{ name }}
                        </td>
                        <td>
                            {{ client.maintainer }}
                        </td>
                        <td>
                            <!-- TODO make this use fancy buttons with links -->
                            {% for platform in client.platforms %}
                            <a href="{{ platform.url }}">{{ platform.name }}</a>
                            {% endfor %}
                        </td>
                        <td>
                            {{ client.last_release }}
                        </td>
                        <td>
                            {{ client.maturity }}
                        </td>
                        <td>
                            {{ client.license }}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </main>
    </article>
</main>
{% endblock content %}